pipeline{
    agent any
    stages{
	stage('checkout') {                                       
        	steps{
		script{   
                def url = readProperties file: 'PropertiesFile'
                echo "${url.GIT_URL}"
                def Var1= url.GIT_URL
                echo "Var1=${Var1}"
                git "${Var1}"
                }
            }
        }
        stage('Build & Compile') { 
			steps{
                sh 'mvn clean package'
            }
        }
        stage ('SonarQube Analysis'){
            steps{
                sh 'mvn sonar:sonar'
            }
        }
        
        stage ('Deploy'){
			steps{
				sh 'sudo cp target/*.war /home/devopsuser4/apache-tomcat-8.5.37/webapps'
				sh 'sudo ls -ltr /home/devopsuser4/apache-tomcat-8.5.37/webapps'
            }
	}             
    }             
}
